var abi = JSON.parse('[ { "constant": false, "inputs": [ { "name": "ideaID", "type": "uint256" }, { "name": "commentText", "type": "string" } ], "name": "newComment", "outputs": [ { "name": "rowNumber", "type": "uint256" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [], "name": "getCommentCount", "outputs": [ { "name": "commentCount", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "ideaID", "type": "uint256" } ], "name": "ideaVoteCount", "outputs": [ { "name": "voteCount", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "ideaID", "type": "uint256" } ], "name": "isIdea", "outputs": [ { "name": "isIndeed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "ideaID", "type": "uint256" } ], "name": "updateIdeaVotes", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "commentList", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "commentID", "type": "uint256" } ], "name": "commentVoteCount", "outputs": [ { "name": "voteCount", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "ideaID", "type": "uint256" } ], "name": "isIdeaAgreed", "outputs": [ { "name": "isIndeedAgreed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "commentID", "type": "uint256" } ], "name": "updateCommentVotes", "outputs": [ { "name": "success", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "ideaStructs", "outputs": [ { "name": "ideaID", "type": "uint256" }, { "name": "ideaText", "type": "string" }, { "name": "ideaOwner", "type": "address" }, { "name": "ideaTime", "type": "uint256" }, { "name": "ideaVotes", "type": "uint256" }, { "name": "isIdea", "type": "bool" }, { "name": "isAgreed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "ideaList", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "", "type": "uint256" } ], "name": "commentStructs", "outputs": [ { "name": "ideaID", "type": "uint256" }, { "name": "commentID", "type": "uint256" }, { "name": "commentText", "type": "string" }, { "name": "commentOwner", "type": "address" }, { "name": "commentTime", "type": "uint256" }, { "name": "commentVotes", "type": "uint256" }, { "name": "isComment", "type": "bool" }, { "name": "isAgreed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getIdeaCount", "outputs": [ { "name": "ideaCount", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "ideaText", "type": "string" } ], "name": "newIdea", "outputs": [ { "name": "rowNumber", "type": "uint256" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "commentID", "type": "uint256" } ], "name": "isComment", "outputs": [ { "name": "isIndeed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "commentID", "type": "uint256" } ], "name": "isCommentAgreed", "outputs": [ { "name": "isIndeedAgreed", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "anonymous": false, "inputs": [ { "indexed": true, "name": "_ideaID", "type": "uint256" }, { "indexed": false, "name": "_ideaText", "type": "string" }, { "indexed": false, "name": "_ideaOwner", "type": "address" }, { "indexed": false, "name": "_ideaTime", "type": "uint256" }, { "indexed": false, "name": "_ideaVotes", "type": "uint256" }, { "indexed": false, "name": "_isIdea", "type": "bool" }, { "indexed": false, "name": "_isAgreed", "type": "bool" } ], "name": "NewIdea", "type": "event" }, { "anonymous": false, "inputs": [ { "indexed": true, "name": "_ideaID", "type": "uint256" }, { "indexed": true, "name": "_commentID", "type": "uint256" }, { "indexed": false, "name": "_commentText", "type": "string" }, { "indexed": false, "name": "_commentOwner", "type": "address" }, { "indexed": false, "name": "_commentTime", "type": "uint256" }, { "indexed": false, "name": "_commentVotes", "type": "uint256" }, { "indexed": false, "name": "_isComment", "type": "bool" }, { "indexed": false, "name": "_isAgreed", "type": "bool" } ], "name": "NewComment", "type": "event" } ]')

MessageContract = web3.eth.contract(abi);
// In your nodejs console, execute contractInstance.address to get the address at which the contract is deployed and change the line below to use your deployed address
contractInstance = MessageContract.at('0xb1ac77520aee6fb1c3f0b4e6335d34b058f0bae5');


var ideaCount;
var commentCount;
var body = document.getElementById('container');
var ideaCountText = document.getElementById('displayIdeaCount');

function displayAddress() {
 contractInstance.getIdeaCount(function(error, result){
     if(!error){
         console.log(web3.eth.accounts[0]);
         var address = document.getElementById('USR_ADDR').value = web3.eth.accounts[0];
       }
     else{
         console.error(error);
       }
 });
}

$(document).ready(function() {

  displayAddress();

});